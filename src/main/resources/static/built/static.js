!function(e){function t(n){if(s[n])return s[n].exports;var i=s[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var s={};t.m=e,t.c=s,t.d=function(e,s,n){t.o(e,s)||Object.defineProperty(e,s,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var s=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(s,"a",s),s},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=15)}([function(e,t,s){"use strict";e.exports={settings:{url:"/api/",rateLimit:5,token:$("meta[name='_csrf']").attr("content"),header:$("meta[name='_csrf_header']").attr("content")},addData:function(t,s){return t=void 0!==t?t:"",fetch(t,{method:"post",credentials:"same-origin",headers:{"X-CSRF-Token":e.exports.settings.token,Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(s)}).then(function(e){return e.json()})},deleteData:function(t,s){return e.exports.addData(t,s)},getData:function(t,s,n){return s=void 0!==s?s:"",n=void 0!==n?n:"",fetch(e.exports.settings.url+t+"/"+s+n).then(function(e){return e.json()})}}},function(e,t,s){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};e.exports={settings:{alertId:"alert",alertFiller:$("#alert"),alertType:"popup",createdPopUpAlert:!1,createdConfirmAlert:!1},displayPopUpAlert:function(t,s){!1===e.exports.settings.createdPopUpAlert&&e.exports.createPopupAlert(),e.exports.settings.createdPopUpAlert=!0,e.exports.removeAlertTypes(),$(".alert").addClass("alert-"+s),$("#alert-message").text(t),$("#alertModal").modal("show")},displayInlineAlert:function(t,s,i){if(t.empty(),e.exports.createInlineAlert(t),"string"==typeof s&&$("#inline-alert-message").text(s),"object"===(void 0===s?"undefined":n(s))){var r='<div class="row">';s.forEach(function(e){r+='<div class="col-12">'+e+"</div>"}),r+="</div>",$("#inline-alert-message").html(r)}$(".alert").addClass("alert-"+i)},removeAlertTypes:function(){$(".alert").removeClass("alert-danger").removeClass("alert-warning").removeClass("alert-success").removeClass("alert-warning").removeClass("alert-primary").removeClass("alert-secondary").removeClass("alert-light").removeClass("alert-dark")},confirmPopUp:function(t){!1===e.exports.settings.createdConfirmAlert&&e.exports.createPopUpConfirm(),e.exports.settings.createdConfirmAlert=!0,$("#confirm-message").text(t),$("#confirmModal").modal("show");var s=$.Deferred();return $("#confirmModal").off("click.prompt").on("click.prompt","#ok",function(){s.resolve(),$("#confirmModal").modal("hide")}).on("click.prompt","#cancel",function(){s.reject(),$("#confirmModal").modal("hide")}),s.promise()},createPopUpConfirm:function(){$("body").append($('<div class="modal p-2 fade" id="confirmModal">').append($('<div class="modal-dialog modal-dialog-centered modal-sm" role="document">').append($(' <div class="modal-content p-2">').append($(' <div class="fade show" role="alert">').append($('<span id="confirm-message" class="p-1">').text("Confirm Message"),$('<div class="text-right">').append($('<button class="btn btn-sm btn-primary p-1 m-1" id="ok">').text("Ok"),$('<button class="btn btn-sm btn-secondary p-1 m-1" id="cancel">').text("Cancel")))))))},createInlineAlert:function(e){e.append($(' <div class="alert alert-dismissible fade show" role="alert">').append($('<button type="button" class="close" data-dismiss="alert" aria-label="Close">').append($(' <span aria-hidden="true">').html("&times;")),$('<span id="inline-alert-message">').text("Alert Message")))},createPopupAlert:function(){$("body").append($('<div class="modal fade" id="alertModal">').append($('<div class="modal-dialog" role="document">').append($(' <div class="modal-content">').append($(' <div class="modal-content">').append($(' <div class="alert alert-dismissible fade show" role="alert">').append($('<button type="button" class="close" data-dismiss="modal" aria-label="Close">').append($(' <span aria-hidden="true">').html("&times;")),$('<span id="alert-message">').text("Alert Message")))))))}}},function(e,t,s){"use strict";e.exports={settings:{img:"../img/loader.svg",injectOn:"#loader",pageLoader:!1},create:function(t,s){null!=s&&1!=s.contains("#")&&(e.exports.settings.injectOn=s+"[data-id="+t+"]"),e.exports.inject(t)},injectFullPageLoader:function(){e.exports.settings.pageLoader||(e.exports.settings.pageLoader=!0,e.exports.settings.injectOn="body",e.exports.inject(0))},display:function(e){$('.loader-img[data-id="'+e+'"]').show()},hide:function(e){$('.loader-img[data-id="'+e+'"]').hide()},toggle:function(e){$('.loader-img[data-id="'+e+'"]').toggle()},inject:function(t){$(e.exports.settings.injectOn).append($('<div class="loader-img" data-id="'+t+'" style="display: none">').append($('<img src="'+e.exports.settings.img+'" >')))}}},,,,,,,,,,,,,function(e,t,s){"use strict";var n=s(0),i=s(16),r=s(17),a=s(18),o=s(2),l=s(19);e.exports={settings:{rateLimit:250,rateMax:!1,results:$("#search-results")},init:function(){e.exports.initEvents()},initEvents:function(){$("#member-find").off(),$(window).keydown(function(e){if(13==e.keyCode)return e.preventDefault(),!1});var t=function(t){t.preventDefault();var s=""!==$(this).val()?$(this).val():$("#member-search").val();s.length>2&&!1===e.exports.settings.rateMax&&(o.display(0),e.exports.settings.rateMax=!0,setTimeout(function(){e.exports.settings.rateMax=!1},e.exports.settings.rateLimit),n.getData("players",encodeURI(s)).then(function(t){e.exports.displaySearch(t)}))};$("#member-find").click(t)},displaySearch:function(t){e.exports.settings.results.empty(),$.each(t,function(t,s){e.exports.settings.results.append($("<tr>").append($('<th scope="row" class="d-none d-sm-table-cell">').text(t+1),$("<td>").append($("<img src="+s.avatar+' class="char-img">')),$('<td class="char-name">').text(s.name),$('<td class="d-none d-sm-table-cell char-server">').text(s.server),$("<td>").append($('<button class="btn btn-secondary import add-member" data-id="'+s.id+'">').text("Add"))))}),e.exports.initEvents(),i.initModule(),setTimeout(function(){o.hide(0)},1e3)}},e.exports.init(),o.injectFullPageLoader(),r.init(),a.init({dataSet:"../api/static/member/delete",triggerClass:"delete-btn",displayClass:"static-member",deleteMsg:"Are you sure you want to delete this static member?"}),l.init(),$(document).scroll(function(){var e=$(this).scrollTop();e>100&&($("#member-list-container").css("position","fixed"),$("#member-list-container").css("display","absolute"),$("#member-list-container").css("width","400px")),e<100&&$("#member-list-container").removeAttr("style")})},function(e,t,s){"use strict";var n=s(1),i=s(0);e.exports={settings:{count:0,list:[],addClass:"add-member",deleteClass:"delete-member",memberList:$("#member-list")},initModule:function(t,s){e.exports.settings.addClass=void 0!==t?t:e.exports.settings.addClass,e.exports.settings.deleteClass=void 0!==s?s:e.exports.settings.deleteClass,e.exports.initHandler()},initHandler:function(){var t="."+e.exports.settings.addClass,s="."+e.exports.settings.deleteClass;$(t).off(),$(s).off(),$("#save-member-add").off(),$(t).click(function(t){t.preventDefault();var s=$(this).data("id"),n=$(this).parent().parent().find(".char-name").text(),i=$(this).parent().parent().find(".char-img").attr("src"),r=$(this).parent().parent().find(".char-name").text();e.exports.addMember({id:s,name:n,img:i,server:r})}),$(s).click(function(t){t.preventDefault();var s=$(this).data("id");e.exports.deleteMember(s)}),$("#save-member-add").click(function(t){if(t.preventDefault(),e.exports.settings.list.length<=0)return n.displayPopUpAlert("You need to add members first.","warning");e.exports.saveMembers()})},addMember:function(t){var s=void 0!==$("#member-count").val()?$("#member-count").val():0;return parseInt(s)+e.exports.settings.count<8?(e.exports.settings.list.push(t),e.exports.renderList(),e.exports.settings.count++,!0):n.displayPopUpAlert("You can't add any more members.","warning")},deleteMember:function(t){for(var s=0;s<e.exports.settings.list.length;s++)if(e.exports.settings.list[s].id===t){e.exports.settings.list.splice(s,1);break}e.exports.settings.count--,e.exports.renderList()},saveMembers:function(){return i.addData("/api/static/member/add",JSON.stringify(e.exports.settings.list)).then(function(){location.reload()}).catch(n.displayPopUpAlert("Adding members failed","danger"))},renderList:function(){var t=0;e.exports.settings.memberList.empty();var s='<div class="row">';e.exports.settings.list.forEach(function(n){t%4==0&&(s+='</div> \n                                <div class="row">'),s+=e.exports.renderSingleMember(n),t++}),s+="</div>",e.exports.settings.memberList.append(s),e.exports.initHandler()},renderSingleMember:function(t){var s=e.exports.settings.deleteClass;return'<div class="col-3">\n                <img class="img-fluid hover-members" src="'+t.img+'" title="Exodus" />\n                    <span class="'+s+'" data-id="'+t.id+'">&times;</span> \n                    <span class="member-name">'+t.name+'</span>\n                    <input type="hidden" name="member[]" value="'+t.id+'">\n                  </div>'}}},function(e,t,s){"use strict";var n=s(0);e.exports={settings:{jobsList:[],editToggle:$(".edit-toggle"),jobDisplayClass:"job-display"},init:function(){e.exports.initHandlers()},initHandlers:function(){$(".edit-toggle").click(function(t){t.preventDefault(),$(this).text().includes("edit")?(e.exports.editJob($(this).parent()),$(this).text("save")):(e.exports.saveJob($(this).parent()),$(this).text("edit"))})},getJobsList:function(){return 0===e.exports.settings.jobsList.length?(e.exports.settings.jobsList=n.getData("jobs"),n.getData("jobs")):e.exports.settings.jobsList},saveJob:function(t){var s="."+e.exports.settings.jobDisplayClass,i=t.find(".job-display select option:selected").val(),r=t.find(".job-display select option:selected").text(),a=t.find(".edit-toggle").data("id");t.find(s).empty(),t.find(s).append(r);var o={memberId:a,jobId:i};n.addData("/api/static/job/update",JSON.stringify(o)).then(function(e){$('.job-img[data-id="'+a+'"]').attr("src","../img/jobs/"+e.assignedJob.abbr+".png")})},editJob:function(t){var s="."+e.exports.settings.jobDisplayClass;t.find(s).empty(),e.exports.createJobEditor().then(function(e){t.find(s).append(e),$(".job-list-select").selectpicker({style:"btn-info",size:3}),$(".job-list-select").selectpicker("setStyle","btn-sm","add")})},createJobEditor:function(){return new Promise(function(t,s){var n='<div class="col-12"><select class="job-list-select" data-width="100%" name="jobSelector">';e.exports.getJobsList().then(function(e){$.each(e,function(e,t){n+='<option value="'+t.id+'">'+t.name+"</option>"}),n+="</select></div>",t(n)})})}}},function(e,t,s){"use strict";var n=s(0),i=s(1);e.exports={settings:{triggerClass:"delete-btn",displayClass:"object-display",dataSet:null,deleteMsg:"Are you sure you'd like to delete this?"},init:function(t){var s=t.dataSet,n=t.triggerClass,i=t.displayClass,r=t.deleteMsg;if(e.exports.settings.dataSet=void 0!==s?s:e.exports.settings.dataSet,e.exports.settings.triggerClass=void 0!==n?n:e.exports.settings.triggerClass,e.exports.settings.displayClass=void 0!==i?i:e.exports.settings.displayClass,e.exports.settings.deleteMsg=void 0!==r?r:e.exports.settings.deleteMsg,null!=e.exports.settings.dataSet)return e.exports.initHandlers();console.log("Error: Init must contain a dataSet for deletion or be false")},initHandlers:function(){$("."+e.exports.settings.triggerClass).click(function(){var t=$(this).data("id");e.exports.confirmRemove(t)})},confirmRemove:function(t){i.confirmPopUp(e.exports.settings.deleteMsg).then(function(){e.exports.updateServer(t).then(e.exports.removeVisual(t)).catch(function(e){console.log(e),i.displayPopUpAlert("Error removing item","danger")})},function(){console.log("You clicked cancel")})},removeVisual:function(t){$("."+e.exports.settings.displayClass+'[data-id="'+t+'"]').remove()},updateServer:function(t){console.log(e.exports.settings.dataSet);var s={memberId:t};return n.deleteData(e.exports.settings.dataSet,JSON.stringify(s))}}},function(e,t,s){"use strict";var n=s(1),i=s(0);e.exports={settings:{},init:function(){e.exports.initHandler()},initHandler:function(){$(".member-gear-sync").click(function(t){t.preventDefault(),console.log($(this).data("id"));var s=$(this).data("id");e.exports.syncMemberToLodestone(s)})},syncMemberToLodestone:function(t){n.confirmPopUp("Are you sure you want to sync?").then(function(){e.exports.getLodestoneData(t)},function(){console.log("You clicked cancel")})},getLodestoneData:function(e){return console.log(e),i.addData("/api/lodestone/import/"+e,e).then(function(e){console.log(e),!1===e.success&&n.displayPopUpAlert(e.errors.display,"danger"),!0===e.success&&n.displayPopUpAlert("Success!","success")}).catch(function(e){n.displayPopUpAlert("Error! Data not imported","danger")})}}}]);
//# sourceMappingURL=static.js.map