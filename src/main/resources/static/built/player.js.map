{"version":3,"sources":["webpack:///webpack/bootstrap 8950cea38f7bf84c7620","webpack:///./src/main/resources/static/js/player.js","webpack:///./src/main/resources/static/js/libs/xibdb.js","webpack:///./src/main/resources/static/js/libs/local.js","webpack:///./src/main/resources/static/js/libs/objects.js"],"names":["xiv","require","addData","toPlayerObj","module","exports","settings","minLength","userInput","$","results","init","hide","initEvents","off","click","e","preventDefault","query","val","length","playerSearch","then","displaySearchData","data","catch","displayAlert","getPlayerdata","Player","submitPlayerData","empty","searchFor","json","each","characters","i","char","append","text","icon","name","server","id","playerObj","msg","type","addClass","show","url","rateLimit","search","encodeURI","fetch","response","getItemData","param","token","attr","header","location","method","credentials","headers","body","JSON","stringify","deleteData","getData","parameter","gender","avatar","portrait","loadstone_id","lodestone_id"],"mappings":"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","file":"player.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 8);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 8950cea38f7bf84c7620","const xiv = require('./libs/xibdb.js');\nconst {addData} = require('./libs/local.js');\nconst {toPlayerObj} = require('./libs/objects');\n\nmodule.exports = {\n\n        settings: { //settings\n            minLength: 3,\n            userInput: $('#user-input'),\n            results: $('#search-results')\n        },\n\n        init: () => {\n            $('#alert').hide();\n\n            module.exports.initEvents();\n        },\n\n        initEvents: () => {\n\n            //turns off events\n            $('.import').off();\n            $('#search').off();\n\n            // Search click submit\n            $('#search').click(function (e) {\n                e.preventDefault();\n                let query = module.exports.settings.userInput.val();\n\n                if (query.length > 3) {\n                    module.exports.playerSearch(query).then(data =>{\n                        module.exports.displaySearchData(data);\n                    }).catch(() => {\n                        module.exports.displayAlert(\"Error pulling search data.\",\"danger\");\n                    });\n                }\n            });\n\n            // Import data button\n            $('.import').click(function (e) {\n                e.preventDefault();\n                xiv.getPlayerdata($(this).data('id')).then(data => {\n                    let Player = toPlayerObj(data);\n                    module.exports.submitPlayerData(Player);\n                }).catch(() => {\n                    module.exports.displayAlert(\"Error with player data.\",\"danger\");\n                });\n            });\n\n\n\n\n        },\n\n        // Returns search results with player data in JSON\n        playerSearch: (query) => {\n            module.exports.settings.results.empty();\n            return xiv.searchFor(\"characters\",query);\n        },\n\n        // Prints display to results location\n        displaySearchData: (json) => {\n\n            $.each(json.characters.results, function (i, char) {\n\n                module.exports.settings.results.append(\n                    $(\"<tr>\").append(\n                        $('<th scope=\"row\" class=\"d-none d-sm-table-cell\">').text(i + 1),\n                        $('<td>').append(\n                            $(`<img src=${char.icon}>`)\n                        ),\n                        $('<td>').text(char.name),\n                        $('<td class=\"d-none d-sm-table-cell\">').text(char.server),\n                        $('<td>').append(\n                            $(`<button class=\"btn btn-secondary import\" data-id=\"${char.id}\">`).text('Import')\n                        )\n                    )\n                );\n\n            });\n\n            //init event handlers\n            module.exports.initEvents();\n        },\n\n        submitPlayerData: (playerObj) => {\n            return addData(\"/api/player/add\",playerObj).then(() => {\n                module.exports.displayAlert(\"Player added.\",\"success\");\n            }).catch(() => {\n                module.exports.displayAlert(\"Error saving player data.\",\"danger\");\n            });\n        },\n\n        displayAlert: (msg, type) => {\n            $('#alert-content').text(msg);\n            $('#alert').addClass(\"alert-\"+type).show();\n        }\n\n};\n\n\nmodule.exports.init();\n\n\n// WEBPACK FOOTER //\n// ./src/main/resources/static/js/player.js","module.exports = {\n\n    settings: { //settings\n        url: \"http://api.xivdb.com/\",\n        rateLimit: 5,\n    },\n\n    searchFor: function (type, search) {\n        type = typeof type !== 'undefined' ? type : '';\n        search = typeof search !== 'undefined' ? search : '';\n        search = encodeURI(search); // ensure proper encoding for url\n\n        return fetch(`${module.exports.settings.url}search?string=${search}&one=${type}`)\n            .then(response => response.json());\n    },\n\n    getItemData : (id,param) => {\n        return fetch(`${module.exports.settings.url}item/${id}`)\n            .then(response => response.json());\n    },\n\n    getPlayerdata: (id, param) => { // https://github.com/xivdb/api/blob/master/Character.md\n        param = typeof param !== 'undefined' ? `?data=${param}` : '';\n        return fetch(`${module.exports.settings.url}character/${id}`)\n            .then(response => response.json());\n    }\n\n};\n\n\n// WEBPACK FOOTER //\n// ./src/main/resources/static/js/libs/xibdb.js","// Functions for local json file interactions\nmodule.exports = {\n\n    settings: { //settings\n        url: \"/api/\",\n        rateLimit: 5,\n        token: $(\"meta[name='_csrf']\").attr(\"content\"),\n        header: $(\"meta[name='_csrf_header']\").attr(\"content\")\n    },\n\n    //Inserts data into server\n    addData: (location, data) => {\n        location = typeof location !== 'undefined' ? location : \"\";\n        return fetch(location, {\n            method: \"post\",\n            credentials: \"same-origin\",\n            headers: {\n                \"X-CSRF-Token\": module.exports.settings.token,\n                \"Accept\": \"application/json\",\n                \"Content-Type\": \"application/json\"\n            },\n            body: JSON.stringify(data)\n        }).then(response => response.json());\n    },\n\n    deleteData: (location, data) => {\n        return module.exports.addData(location, data);\n    },\n\n    // query for post data\n    // parameter for url info\n    // ex: players/Name+Last/?post=3 type/parameter/query\n    getData: (type, parameter, query) => {\n        parameter = typeof parameter !== 'undefined' ? parameter : \"\";\n        query = typeof query !== 'undefined' ? query : \"\";\n\n        return fetch(module.exports.settings.url + type +\"/\"+ parameter + query)\n            .then(response => response.json());\n    }\n};\n\n\n// WEBPACK FOOTER //\n// ./src/main/resources/static/js/libs/local.js","\n// Take JSON data and represent as JSON object for input\nmodule.exports = {\n\n    settings: {\n\n    },\n\n    toPlayerObj: (json) => {\n        return {\n            name: json.data.name,\n            gender: (json.data.gender === \"male\") ? 0 : 1,\n            avatar: json.data.avatar,\n            server: json.data.server,\n            portrait: json.data.portrait,\n            loadstone_id: json.lodestone_id\n\n        };\n    }\n\n\n};\n\n\n// WEBPACK FOOTER //\n// ./src/main/resources/static/js/libs/objects.js"],"sourceRoot":""}